{"version":3,"sources":["webpack:///webpack/bootstrap c7bbc8d591b06b82cebd","webpack:///./src/dep.js","webpack:///./src/wathcer.js","webpack:///./src/compiler.js","webpack:///./src/observer.js","webpack:///./src/index.js","webpack:///./src/util.js"],"names":["Dep","subs","target","uid","options","Object","keys","forEach","key","update","$uid","exp","scope","callback","value","foo","newVal","get","Util","isEqual","computeExpression","$$id","updater","text","node","textContent","html","innerHTML","isInputting","checkbox","$id","indexOf","checked","attr","attrName","setAttribute","style","dom","nextNode","parentNode","insertBefore","removeChild","$el","el","vm","$fragment","_nodeToFragment","compile","appendChild","childNodes","length","child","nodeType","compileTextNode","compileElementNode","attrs","attributes","lazyCompileDir","lazyCompileExp","name","dir","_checkDirective","type","handler","bind","prop","console","error","removeAttribute","parse","substring","split","trim","_parseTextExp","textHandler","bindWatcher","refNode","document","createTextNode","current","updateFn","regText","pieces","matches","match","tokens","piece","push","JSON","stringify","join","fragment","createDocumentFragment","_isIgnorable","regIgnorable","test","data","observe","observeObject","val","dep","self","defineProperty","enumerable","configurable","addSub","set","Array","isArray","observeArray","notify","arr","setPrototypeOf","defineReactiveArray","item","arrayPrototype","prototype","arrayObject","create","methods","method","originalMethod","args","result","apply","inserted","slice","writable","index","splice","querySelector","$data","$options","assign","computed","window","_proxy","_proxyMethods","proxy","call","undefined","hasOwnProperty","Fuc","a","b","from","isObject","eval","e"],"mappings":"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","file":"fuc.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c7bbc8d591b06b82cebd","class Dep {\n  static target;\n  subs;\n  constructor() {\n    this.subs = {};\n  }\n  addSub(target) {\n    if (!this.subs[target.uid]) {\n      this.subs[target.uid] = target;\n    }\n  }\n  notify(options) {\n    Object.keys(this.subs).forEach((key) => {\n      this.subs[key].update(options);\n    });\n  }\n}\nexport default Dep;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dep.js","import Dep from './dep';\nimport Util from './util';\n\nlet $uid = 0;\n\nclass Watcher {\n  exp;\n  scope;\n  callback;\n  value = null;\n  uid = $uid;\n  /**\n   * 用于和订阅者建立联系，当数据变更时通知watcher，watcher发出命令更新Dom\n   * @param {any} exp\n   * @param {any} scope\n   * @param {any} callback\n   * @memberof Watcher\n   */\n  constructor(exp, scope, callback) {\n    this.exp = exp;\n    this.scope = scope;\n    this.callback = callback || function foo() {};\n\n    // this.value = null;\n    // this.uid = $uid;\n    $uid += 1;\n    this.update();\n  }\n  update(options) {\n    // Dep.target = this;\n    const newVal = this.get();\n\n    if (!Util.isEqual(this.value, newVal)) {\n      this.callback(newVal, this.value, options);\n    }\n  }\n  get() {\n    Dep.target = this;\n    const value = Util.computeExpression(this.exp, this.scope);\n    Dep.target = null;\n    return value;\n  }\n}\nexport default Watcher;\n\n\n\n// WEBPACK FOOTER //\n// ./src/wathcer.js","// @ts-check\nimport Watcher from './wathcer';\n\nlet $$id = 0;\n\nconst updater = {\n  text(node, newVal) {\n    node.textContent = typeof newVal === 'undefined' ? '' : newVal;\n  },\n  html(node, newVal) {\n    node.innerHTML = typeof newVal === 'undefined' ? '' : newVal;\n  },\n  value(node, newVal) {\n    // 当有输入的时候循环依赖了，中文输入法不能用。这里加入一个标志避开自动update\n    if (!node.isInputting) {\n      node.value = newVal || '';\n    }\n    node.isInputting = false;\n  },\n  checkbox(node, newVal) {\n    // 处理数组\n    const value = node.value || node.$id;\n    if (newVal.indexOf(value) < 0) {\n      node.checked = false;\n    } else {\n      node.checked = true;\n    }\n  },\n  attr(node, newVal, attrName) {\n    newVal = typeof newVal === 'undefined' ? '' : newVal;\n    node.setAttribute(attrName, newVal);\n  },\n  style(node, newVal, attrName) {\n    newVal = typeof newVal === 'undefined' ? '' : newVal;\n    if (attrName === 'display') {\n      newVal = newVal ? 'initial' : 'none';\n    }\n    node.style[attrName] = newVal;\n  },\n  dom(node, newVal, nextNode) {\n    if (newVal) {\n      nextNode.parentNode.insertBefore(node, nextNode);\n    } else {\n      nextNode.parentNode.removeChild(node);\n    }\n  },\n};\nexport default class Compiler {\n  $el;\n  vm;\n  $fragment;\n  constructor(options) {\n    this.$el = options.el;\n    this.vm = options.vm;\n    if (this.$el) {\n      /* eslint no-underscore-dangle: 0*/\n      // 先从dom挂载到js内存中\n      this.$fragment = this._nodeToFragment();\n      this.compile(this.$fragment);\n      this.$el.appendChild(this.$fragment);\n    }\n  }\n  compile(node, scope) {\n    node.$id = $$id;\n    $$id += 1;\n\n    if (node.childNodes.length > 0) {\n      [...node.childNodes].forEach((child) => {\n        switch (child.nodeType) {\n          case 3:\n            this.compileTextNode(child, scope);\n            break;\n          case 1:\n            this.compileElementNode(child, scope);\n            break;\n          default:\n        }\n      });\n    }\n  }\n  compileElementNode(node, scope = this.vm) {\n    const attrs = [...node.attributes];\n    let lazyCompileDir = '';\n    let lazyCompileExp = '';\n\n    attrs.forEach((attr) => {\n      const attrName = attr.name;\n      const exp = attr.value;\n      const dir = this._checkDirective(attrName);\n\n      if (dir.type) {\n        if (dir.type === 'if' || dir.type === 'for') {\n          lazyCompileDir = dir.type;\n          lazyCompileExp = exp;\n        } else {\n          const handler = this[`${dir.type}Handler`].bind(this);\n          if (handler) {\n            handler(node, scope, exp, dir.prop);\n          } else {\n            console.error(`找不到${dir.type}指令`);\n          }\n        }\n      }\n      node.removeAttribute(attrName);\n    });\n    // TODO if for不能共存\n    if (lazyCompileExp) {\n      this[`${lazyCompileDir}Handler`](node, scope, lazyCompileExp);\n    } else {\n      // 向下遍历节点\n      this.compile(node, scope);\n    }\n  }\n  _checkDirective(attrName) {\n    const dir = {};\n    if (attrName.indexOf('f-') === 0) {\n      const parse = attrName.substring(2).split(':');\n      dir.type = parse[0];\n      dir.prop = parse[1];\n    } else if (attrName.indexOf('@') === 0) {\n      dir.type = 'on';\n      dir.prop = attrName.substring(1);\n    } else if (attrName.indexOf(':') === 0) {\n      dir.type = 'bind';\n      dir.prop = attrName.substring(1);\n    }\n    return dir;\n  }\n  compileTextNode(node, scope) {\n    const text = node.textContent.trim();\n    if (text) {\n      const exp = this._parseTextExp(text);\n      this.textHandler(node, scope || this.vm, exp);\n    }\n  }\n  // v-text\n  textHandler(node, scope, exp) {\n    this.bindWatcher(node, scope, exp, 'text');\n  }\n\n  ifHandler(node, scope, exp) {\n    // 先编译子元素，然后根据表达式决定是否插入dom中\n    // PS：这里需要先插入一个占位元素来定位，不能依赖其他元素，万一其他元素没了呢？\n    this.compile(node, scope);\n    const refNode = document.createTextNode('');\n    node.parentNode.insertBefore(refNode, node);\n    const current = node.parentNode.removeChild(node);\n    this.bindWatcher(current, scope, exp, 'dom', refNode); // refNode是引用关系，移动到parentNode后会自动更新位置，所以可以传入\n  }\n  /**\n *\n *\n * @param {any} node\n * @param {any} scope\n * @param {any} exp\n * @param {any} dir 绑定类型\n * @param {any} prop\n * @memberof Compile\n */\n  bindWatcher(node, scope, exp, dir, prop) {\n    const updateFn = updater[dir];\n    /* eslint-disable no-new */\n    new Watcher(exp, scope, (newVal) => {\n      updateFn(node, newVal, prop);\n    });\n    /* eslint-enable no-new */\n  }\n  /**\n   * {{name}号码{{tel}}} => `name+'号码'+tel`\n   * 用于eval\n   *\n   * @param {any} text\n   * @returns\n   * @memberof Compile\n   */\n  _parseTextExp(text) {\n    const regText = /\\{\\{((?:.|\\n)+?)\\}\\}/g;\n    const pieces = text.split(regText);\n    const matches = text.match(regText); // 模板数组\n    const tokens = [];\n\n    pieces.forEach((piece) => {\n      if (matches && matches.indexOf(`{{${piece}}}`) > -1) {\n        tokens.push(piece);\n      } else if (piece) {\n        tokens.push(JSON.stringify(piece));\n      }\n    });\n    return tokens.join('+');\n  }\n  _nodeToFragment() {\n    const fragment = document.createDocumentFragment();\n\n    [...this.$el.childNodes].forEach((child) => {\n      if (this._isIgnorable(child)) {\n        this.$el.removeChild(child);\n      } else {\n        fragment.appendChild(child);\n      }\n    });\n    return fragment;\n  }\n  _isIgnorable(node) {\n    const regIgnorable = /^[\\t\\n\\r]+/;\n    return node.nodeType === 8 || (node.nodeType === 3 && regIgnorable.test(node.textContent));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/compiler.js","// @ts-check\nimport Dep from './dep';\n\nclass Observer {\n  // data;\n\n  constructor(data) {\n    // this.data = data;\n    // 劫持数据\n    this.observe(data);\n  }\n  observe(data) {\n    if (data && typeof data === 'object') {\n      Object.keys(data).forEach((key) => {\n        this.observeObject(data, key, data[key]);\n      });\n    }\n  }\n\n  observeObject(data, key, val) {\n    const dep = new Dep();\n    const self = this;\n    Object.defineProperty(data, key, {\n      enumerable: true,\n      configurable: true,\n      get() {\n        /* eslint-disable no-unused-expressions*/\n        Dep.target && dep.addSub(Dep.target);\n        /* eslint-enable no-unused-expressions*/\n        return val;\n      },\n      set(newVal) {\n        if (val === newVal) {\n          return;\n        }\n        val = newVal;\n        if (Array.isArray(newVal)) {\n          self.observeArray(newVal, Dep);\n        } else {\n          self.observe(newVal);\n        }\n        dep.notify(); // 触发通知\n      },\n    });\n\n    if (Array.isArray(val)) {\n      this.observeArray(val, dep); // 递归监视，数组的监视要分开\n    } else {\n      this.observe(val); // 递归对象属性到基本类型为止\n    }\n  }\n\n  observeArray(arr, dep) {\n    Object.setPrototypeOf(arr, this.defineReactiveArray(dep));\n    arr.forEach((item) => {\n      this.observe(item);\n    });\n  }\n  /**\n   * 生成代理对象，伪装[].__proto__\n   *\n   * @param {any} dep\n   * @returns\n   * @memberof Observer\n   */\n  defineReactiveArray(dep) {\n    const arrayPrototype = Array.prototype;\n    const arrayObject = Object.create(arrayPrototype);\n\n    const methods = ['pop', 'push', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n\n    methods.forEach((method) => {\n      const originalMethod = arrayPrototype[method];\n\n      Object.defineProperty(arrayObject, method, {\n        value(...args) {\n          const result = originalMethod.apply(this, args);\n          let inserted;\n\n          switch (method) {\n            case 'push':\n            case 'unshift':\n              inserted = args;\n              break;\n            case 'splice':\n              inserted = args.slice(2);\n              break;\n            default:\n          }\n\n          if (inserted) {\n            this.observeArray(inserted, dep);\n          }\n          dep.notify({ method, args });\n\n          return result;\n        },\n        enumerable: true,\n        writable: true,\n        configurable: true,\n      });\n    });\n    // 提供添加/设置新值的快捷方法\n    Object.defineProperty(arrayObject, '$set', {\n      value(index, value) {\n        // 超出数组长度默认追加到最后\n        if (index >= this.length) {\n          index = this.length;\n        }\n        return this.splice(index, 1, value)[0];\n      },\n    });\n\n    Object.defineProperty(arrayObject, '$remove', {\n      value(item) {\n        const index = this.indexOf(item);\n\n        if (index > -1) {\n          this.splice(index, 1);\n        }\n      },\n    });\n\n    return arrayObject;\n  }\n}\nexport default Observer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer.js","// @ts-check\n// import Observer from './observer';\nimport Compiler from './compiler';\nimport Observer from './observer';\n\nclass Fuc {\n  constructor(options) {\n    this.$el = document.querySelector(options.el);\n    this.$data = options.data;\n    this.$options = Object.assign(\n      {\n        computed: {},\n        methods: {},\n      },\n      options,\n    );\n    this.window = window;\n    /* eslint no-underscore-dangle: 0*/\n    this._proxy(this.$options);\n    this._proxyMethods(options.methods);\n    /* eslint-disable  no-new*/\n    new Observer(this.$data);\n    new Compiler({ el: this.$el, vm: this });\n    /* eslint-enable  no-new*/\n  }\n  // 代理计算属性和$data\n  _proxy(data) {\n    const proxy = ['data', 'computed'];\n\n    proxy.forEach((item) => {\n      Object.keys(data[item]).forEach((key) => {\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: true,\n          get() {\n            if (typeof this.$data[key] !== 'undefined') {\n              return this.$data[key];\n            } else if (typeof this.$options.computed[key] !== 'undefined') {\n              return this.$options.computed[key].call(this);\n            }\n            return undefined;\n          },\n          set(newVal) {\n            if (Object.prototype.hasOwnProperty.call(this.$data, key)) {\n              this.$data[key] = newVal;\n            } else if (Object.prototype.hasOwnProperty.call(this.$options.computed, key)) {\n              this.$options.computed[key] = newVal;\n            }\n          },\n        });\n      });\n    });\n  }\n  _proxyMethods(methods) {\n    Object.keys(methods).forEach((key) => {\n      this[key] = this.$options.methods[key];\n    });\n  }\n}\nObject.defineProperty(window, 'Fuc', {\n  value: Fuc,\n});\nexport default Fuc;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default class Util {\n  static isEqual(a, b) {\n    return a === b || JSON.stringify(a) === JSON.stringify(b);\n  }\n  static isObject(val) {\n    return val !== null && typeof val === 'object';\n  }\n  static deepCopy(from) {\n    if (Util.isObject(from)) {\n      return Object.assign({}, from);\n    }\n    return from;\n  }\n  static computeExpression(exp, vm) {\n    try {\n      // with(context){\n      /* eslint-disable no-eval */\n      return eval(exp);\n      /* eslint-enable no-eval */\n      // }\n    } catch (e) {\n      window.console.error('ERROR', e);\n      return '';\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js"],"sourceRoot":""}