(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function t(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function n(e){t(this,n),this.observe(e)}function i(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function o(e){i(this,o),this.$el=e.el,this.vm=e.vm,this.$el&&(this.$fragment=this._nodeToFragment(),this.compile(this.$fragment),this.$el.appendChild(this.$fragment))}function r(t){e(this,r),this.$el=U.document.querySelector(t.el),this.$data=t.data,this.$options=U.Object.assign({computed:{},methods:{}},t),this.window=U.window,this._proxy(this.$options),this._proxyMethods(t.methods),new n(this.$data),new o({el:this.$el,vm:this})}function a(e){return typeof e}function s(e){var t=this;e&&"object"===(void 0===e?"undefined":a(e))&&U.Object.keys(e).forEach(function(n){t.observeObject(e,n,e[n])})}function c(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function u(){c(this,u),this.subs={}}function l(e,t,n){var i=new u,o=this;U.Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return u.target&&i.addSub(u.target),n},set:function(e){n!==e&&(n=e,U.Array.isArray(e)?o.observeArray(e,u):o.observe(e),i.notify())}}),U.Array.isArray(n)?this.observeArray(n,i):this.observe(n)}function f(e,t){var n=this;U.Object.setPrototypeOf(e,this.defineReactiveArray(t)),e.forEach(function(e){n.observe(e)})}function h(e){var t=U.Array.prototype,n=U.Object.create(t);return["pop","push","shift","unshift","sort","reverse","splice"].forEach(function(i){var o=t[i];U.Object.defineProperty(n,i,{value:function(){for(var t=arguments.length,n=U.Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=o.apply(this,n),s=void 0;switch(i){case"push":case"unshift":s=n;break;case"splice":s=n.slice(2)}return s&&this.observeArray(s,e),e.notify({method:i,args:n}),a},enumerable:!0,writable:!0,configurable:!0})}),U.Object.defineProperty(n,"$set",{value:function(e,t){return e>=this.length&&(e=this.length),this.splice(e,1,t)[0]}}),U.Object.defineProperty(n,"$remove",{value:function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)}}),n}function d(e){if(U.Array.isArray(e)){for(var t=0,n=U.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return U.Array.from(e)}function p(e,t){G[0]||(G[0]={$$id:0,$uid:0});var n=this;e.$id=G[0].$$id,G[0].$$id+=1,e.childNodes.length>0&&[].concat(d(e.childNodes)).forEach(function(e){switch(e.nodeType){case 3:n.compileTextNode(e,t);break;case 1:n.compileElementNode(e,t)}})}function v(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.vm,i=[].concat(d(e.attributes)),o="",r="";i.forEach(function(i){var a=i.name,s=i.value,c=t._checkDirective(a);if(c.type)if("if"===c.type||"for"===c.type)o=c.type,r=s;else{var u=t[c.type+"Handler"].bind(t);u?u(e,n,s,c.prop):U.console.error("找不到"+c.type+"指令")}e.removeAttribute(a)}),r?this[o+"Handler"](e,n,r):this.compile(e,n)}function b(e){var t={};if(0===e.indexOf("f-")){var n=e.substring(2).split(":");t.type=n[0],t.prop=n[1]}else 0===e.indexOf("@")?(t.type="on",t.prop=e.substring(1)):0===e.indexOf(":")&&(t.type="bind",t.prop=e.substring(1));return t}function y(e,t){var n=e.textContent.trim();if(n){var i=this._parseTextExp(n);this.textHandler(e,t||this.vm,i)}}function m(e,t,n){this.bindWatcher(e,t,n,"text")}function g(e,t,n){this.compile(e,t);var i=U.document.createTextNode("");e.parentNode.insertBefore(i,e);var o=e.parentNode.removeChild(e);this.bindWatcher(o,t,n,"dom",i)}function $(e,t){e.textContent=void 0===t?"":t}function O(e,t){e.innerHTML=void 0===t?"":t}function w(e,t){e.isInputting||(e.value=t||""),e.isInputting=!1}function x(e,t){var n=e.value||e.$id;t.indexOf(n)<0?e.checked=!1:e.checked=!0}function E(e,t,n){t=void 0===t?"":t,e.setAttribute(n,t)}function j(e,t,n){t=void 0===t?"":t,"display"===n&&(t=t?"initial":"none"),e.style[n]=t}function A(e,t,n){t?n.parentNode.insertBefore(e,n):n.parentNode.removeChild(e)}function T(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function C(e,t,n){G[0]||(G[0]={$$id:0,$uid:0}),T(this,C),this.value=null,this.uid=G[0].$uid,this.exp=e,this.scope=t,this.callback=n||function(){},G[0].$uid+=1,this.update()}function N(e,t,n,i,o){void 0===ne&&(ne={text:$,html:O,value:w,checkbox:x,attr:E,style:j,dom:A});var r=ne[i];new C(n,t,function(t){r(e,t,o)})}function k(e){var t=/\{\{((?:.|\n)+?)\}\}/g,n=e.split(t),i=e.match(t),o=[];return n.forEach(function(e){i&&i.indexOf("{{"+e+"}}")>-1?o.push(e):e&&o.push(U.JSON.stringify(e))}),o.join("+")}function _(){var e=this,t=U.document.createDocumentFragment();return[].concat(d(this.$el.childNodes)).forEach(function(n){e._isIgnorable(n)?e.$el.removeChild(n):t.appendChild(n)}),t}function P(e){var t=/^[\t\n\r]+/;return 8===e.nodeType||3===e.nodeType&&t.test(e.textContent)}function H(e){var t=this;["data","computed"].forEach(function(n){U.Object.keys(e[n]).forEach(function(e){U.Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return void 0!==this.$data[e]?this.$data[e]:void 0!==this.$options.computed[e]?this.$options.computed[e].call(this):void 0},set:function(t){U.Object.prototype.hasOwnProperty.call(this.$data,e)?this.$data[e]=t:U.Object.prototype.hasOwnProperty.call(this.$options.computed,e)&&(this.$options.computed[e]=t)}})})})}function S(e){var t=this;U.Object.keys(e).forEach(function(e){t[e]=t.$options.methods[e]})}function F(e){this.subs[e.uid]||(this.subs[e.uid]=e)}function R(e){var t=this;U.Object.keys(this.subs).forEach(function(n){t.subs[n].update(e)})}function D(e,t){if(!(e instanceof t))throw new U.TypeError("Cannot call a class as a function")}function I(){D(this,I)}function W(e,t){return e===t||U.JSON.stringify(e)===U.JSON.stringify(t)}function q(e){return typeof e}function J(e){return null!==e&&"object"===(void 0===e?"undefined":q(e))}function M(e){return I.isObject(e)?U.Object.assign({},e):e}function B(e,t){try{return U.eval(e)}catch(e){return U.window.console.error("ERROR",e),""}}function L(e){void 0===ie&&(ie={a:I});var t=this.get();ie.a.isEqual(this.value,t)||this.callback(t,this.value,e)}function z(){void 0===ie&&(ie={a:I}),u.target=this;var e=ie.a.computeExpression(this.exp,this.scope);return u.target=null,e}var G=Array(1),K={enumerable:!1,configurable:!0,writable:!1},Q={enumerable:!1,configurable:!0,writable:!0},U=this,V=Object.defineProperty,X=n.prototype,Y=o.prototype,Z=r.prototype,ee=u.prototype,te=C.prototype;K.value="Observer",V(n,"name",K),K.value="Compiler",V(o,"name",K),K.value="Fuc",V(r,"name",K),K.value="Dep",V(u,"name",K);var ne;K.value="Watcher",V(C,"name",K),Q.value=W,V(I,"isEqual",Q),Q.value=J,V(I,"isObject",Q),Q.value=M,V(I,"deepCopy",Q),Q.value=B,V(I,"computeExpression",Q);var ie;Q.value=z,V(te,"get",Q),Q.value=L,V(te,"update",Q),Q.value=R,V(ee,"notify",Q),Q.value=F,V(ee,"addSub",Q),Q.value=S,V(Z,"_proxyMethods",Q),Q.value=H,V(Z,"_proxy",Q),Q.value=P,V(Y,"_isIgnorable",Q),Q.value=_,V(Y,"_nodeToFragment",Q),Q.value=k,V(Y,"_parseTextExp",Q),Q.value=N,V(Y,"bindWatcher",Q),Q.value=g,V(Y,"ifHandler",Q),Q.value=m,V(Y,"textHandler",Q),Q.value=y,V(Y,"compileTextNode",Q),Q.value=b,V(Y,"_checkDirective",Q),Q.value=v,V(Y,"compileElementNode",Q),Q.value=p,V(Y,"compile",Q),Q.value=h,V(X,"defineReactiveArray",Q),Q.value=f,V(X,"observeArray",Q),Q.value=l,V(X,"observeObject",Q),Q.value=s,V(X,"observe",Q),V(this,"Fuc",{enumerable:!1,configurable:!1,writable:!1,value:r}),U.default=r}).call(this);